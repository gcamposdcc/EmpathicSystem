package cl.automind.empathy.feedback;

import java.util.Map;

import interfaces.structural.INamed;

public abstract class AbstractMessage implements INamed{
	public final static String KEY_PREFIX = "@";
	private Map<String, Object> defaultValues;
	/**
	 * @return The codename of the EmpathicMessage, this should be unique.
	 */
	@Override public abstract String getName();
	/**
	 * @return The message that will be shown to the player
	 */
	public String getMessage(){
		return getMessage(getDefaultValues());
	}
	/**
	 * @return The message that will be shown to the player
	 */
	public String getMessage(Map<String, Object> values){
		return filterMessage(values);
	}
	/**
	 * @return The codename of the EmpathicEmotion that will be displayed with this message.
	 */
	public abstract String getEmotionName();
	
	public abstract String getUnfilteredMessage();
	protected abstract Map<String, Object> getDefaultValues();
	protected String filterMessage(Map<String, Object> values){
		String message = getUnfilteredMessage();
		for (String key: values.keySet()){
			message.replaceAll(KEY_PREFIX+key, values.get(key).toString());
		}
		return message;
	}
}
