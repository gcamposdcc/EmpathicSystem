package cl.automind.empathy.fw.arbiter;

import java.util.ArrayList;
import java.util.HashMap;
import java.util.List;
import java.util.Map;

import cl.automind.empathy.EmpathicKernel;
import cl.automind.empathy.rule.AbstractArbiter;
import cl.automind.empathy.rule.RuleUsageData;

public class DefaultArbiter extends AbstractArbiter {
	private final Map<String, RuleUsageData> ruleUsageData;
	private final List<String> ruleUsage;
	private int differentRulesUsed;
	public DefaultArbiter(EmpathicKernel kernel) {
		super(kernel);
		ruleUsageData = new HashMap<String, RuleUsageData>();
		ruleUsage = new ArrayList<String>();
	}

	@Override
	public Map<String, RuleUsageData> getAllRuleUsageData() {
		return ruleUsageData;
	}

	@Override
	public List<String> getRuleUsageList() {
		// TODO Auto-generated method stub
		return null;
	}

	@Override
	public int getDifferentRulesUsedCount() {
		// TODO Auto-generated method stub
		return 0;
	}

	@Override
	public void preUpdateValidRule() {
		// TODO Auto-generated method stub

	}

	@Override
	public void postUpdateValidRule() {
		String rulename = getValidRule().getName();
		if (getRuleUsageList().contains(rulename)){
			
		} else {
			ruleUsage.add(rulename);
			ruleUsageData.put(rulename, new RuleUsageData());
			differentRulesUsed++;
		}
	}
	/**
	 * Returns true if the current valid rule needs to be updated.
	 * The implementation in {@link DefaultArbiter} ALWAYS returns true.
	 * @return true
	 */
	@Override
	public boolean needsUpdate() {
		return true;
	}

}
